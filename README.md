# TempChat

TempChat is a temporary chat application that allows users to communicate in real-time using unique codes. This application does not store messages after the chat session ends, ensuring user privacy.

## Features

- **Unique Code Generation:** One device can generate a unique code to connect with another device.
- **Input Unique Code:** Other devices can enter the unique code to connect.
- **Real-Time Chat:** Send and receive messages instantly after connecting.
- **End Chat:** The chat will end if both users agree or if one user disconnects. All messages will be deleted after the chat ends.

## System Architecture

### Client Side (TypeScript, React with Vite, Tailwind CSS, Ant Design)

- UI components for generating and entering unique codes.
- UI component for chatting.
- UI component for ending the chat.
- Context API for state management.
- WebSocket for real-time communication with the backend.

### Server Side (JavaScript, Express.js, WebSocket)

- REST endpoints for generating and validating unique codes.
- WebSocket server for managing real-time connections.
- Temporary storage for storing unique codes and connected device pairs.

## Data Storage

For now, we will use temporary in-memory storage on the server to store unique codes and connected device pairs.

#### Temporary Storage:

- **Codes:** code, client_id_1, client_id_2, created_at

## Application Flow and Workflow

1. **Generating Unique Code:**

- Users open the application and choose to generate a unique code.
- The frontend sends a request to the backend through a REST endpoint to generate a unique code.
- The backend generates a unique code, temporarily stores it, and sends the code to the frontend.
- The frontend displays the unique code to the user.

2. **Entering Unique Code:**

- Another user opens the application and enters the unique code generated by the first device.
- The frontend sends a request to the backend through a REST endpoint to validate the unique code.
- The backend validates the unique code and connects the two devices.
- The backend initializes a WebSocket connection for both devices.

3. **WebSocket Connection:**

- After connecting using the unique code, the frontend opens a WebSocket connection to the server.
- The server manages the connection and connects the user to the relevant chat session.

4. **Sending and Receiving Messages:**

- Users send messages through the UI.
- Messages are sent to the server via WebSocket.
- The server processes the messages and sends them to the other connected user in the session.
- The frontend receives new messages via WebSocket and displays them in the UI.

5. **Ending the Chat:**

- One user presses the "End Chat" button.
- The frontend sends a request to the backend through WebSocket to end the chat.
- The backend sends a confirmation request to both users.
- If both users agree, the backend ends the chat and deletes all messages.
- If one user disconnects, the backend automatically ends the chat and deletes all messages.

## Technologies Used

### Frontend

- **React**: The main library for UI development.
- **Vite**: A fast and modern build tool.
- **Tailwind CSS**: Used for utility-based styling.
  ```bash
  npm install tailwindcss
  ```
- **Ant Design**: Provides ready-to-use UI components.
  ```bash
  npm install antd
  ```
- **Context API**: Used for state management.
- **WebSocket**: Used for real-time communication.
  ```bash
  npm install websocket
  ```

### Backend (ExpressJS)

- **Express.js**: The main framework for REST APIs.
  ```bash
  npm install express
  ```
- **ws**: Library for WebSocket.
  ```bash
  npm install ws
  ```
- **Winston**: Used for logging.
  ```bash
  npm install winston
  ```

### Workflow Diagram

1. Generate Unique Code -> Backend -> Temporary Storage -> Frontend
2. Enter Unique Code -> Backend -> Validation -> WebSocket Connection
3. WebSocket Connection -> Backend
4. Send Message -> WebSocket -> Backend -> WebSocket -> Other User
5. End Chat -> End Chat Button -> Backend -> Confirmation -> Both Users Agree -> Delete Messages
6. End Chat -> One User Disconnects -> Backend -> Delete Messages
